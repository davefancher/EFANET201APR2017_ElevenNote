#PART 12: ADD A STAR OPTION
---
###Add `isStarred` Property to Database
Let's add an option to star a note.  This is an example of how to make changes after you've completed the first version of something. You may want to work on another branch. 
1. Go to **ElevenNote.Data > Note.cs**
2. Add the following property between the `Content` and `CreatedUtc` properties and ![Save](/assets/font-awesome-save.png) 

    ```cs
        [DefaultValue(false)]
        public bool IsStarred { get; set; }
    ```
3. In order for the database to be updated with this new column, we need to run [migrations.](/3-DatabaseSetup/3.0b-Migrations.md)

###Update the `NoteListItem` Model
1. Add the `IsStarred` property to the `NoteListItem` model:
```cs
    [UIHint("Starred")]
    public bool IsStarred { get; set; }
```

###Update `NoteService.cs`
1. Add the `IsStarred` option in the `IEnumerable<NoteListItem>` thing, and the GetNoteById and UpdateNote?
<!-- TODO: figure out the right names for these things -->

    ```cs
        new NoteListItem
    {
        NoteId = e.NoteId,
        Title = e.Title,
        IsStarred = e.IsStarred,
        CreatedUtc = e.CreatedUtc
    }
    ```

###Add Star to Index View
1. Open **ElevenNote.Web > Views > Note > Index.cs**
2. Add the `DisplayNameFor` for `IsStarred`

    ```html
            <th>
            @Html.DisplayNameFor(model => model.Title)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.IsStarred)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.CreatedUtc)
        </th>
        <th></th>
    </tr>
    ```
3. Add the `DisplayFor` for `IsStarred`
    ```html
        <td>
            @Html.DisplayFor(modelItem => item.Title)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.IsStarred, new { Id = item.NoteId })
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.CreatedUtc)
        </td>
        <td>
            @Html.ActionLink("Edit", "Edit", new { id = item.NoteId }) |
            @Html.ActionLink("Details", "Details", new { id = item.NoteId }) |
            @Html.ActionLink("Delete", "Delete", new { id = item.NoteId })
        </td>
    </tr>
    ```
4. Add this code at the very end:

    ```html
    @section scripts {
    <script language="javascript" type="text/javascript">
        $(document).ready(function () {
            $("i[data-toggle='star']")
                .css({ "cursor": "pointer" })
                .click(function (e) {
                    var target = $(e.target);
                    var noteId = target.attr("data-id");
                    var starSet = target.hasClass("glyphicon-star");

                    $.ajax({
                        method: starSet ? "DELETE" : "PUT",
                        url: "/api/note/" + noteId + "/star",
                        data: null
                    })
                    .done(function (r) {
                        target.removeClass();
                        target.addClass("glyphicon " + (starSet ? "glyphicon-star-empty" : "glyphicon-star"));
                    })
                    .fail(function (r) {
                        alert("Failed to change star status");
                    });
                });
        });
    </script>
}
    ```
5. ![Save](/assets/font-awesome-save.png)

###Add the Starred Display Template
1. Right click on the **ElevenNote.Web > Views > Shared > Display Templates** folder and select **Add > View**
2. Name it `Starred` and fill it out like this:
![Starred View](/assets/12.0-A.png)
3. Add this code:

    ```html
        @model bool

    <span>
        <i class="glyphicon @(Model ? "glyphicon-star" : "glyphicon-star-empty")"
           data-toggle="star"
           data-id="@ViewBag.Id"></i>
    </span>
    ```
4. ![Save](/assets/font-awesome-save.png)

[Next]()

